# 管理者ログインできない場合の対処方法

## 問題の原因

管理者ログインができない場合、以下の原因が考えられます：

1. データベースに管理者が登録されていない
2. パスワードハッシュが正しくない
3. 認証プロバイダーの設定に問題がある

## 確認方法1: データベースの管理者テーブルを確認

MySQLに接続して、管理者テーブルの内容を確認：

```sql
USE clinic_booking_db;
SELECT * FROM administrators;
```

管理者レコードが存在するか確認してください。

## 確認方法2: パスワードハッシュの再生成

管理者のパスワードが`admin`の場合、BCryptハッシュを再生成する必要がある場合があります。

### 方法A: アプリケーションコードでハッシュを生成

一時的に以下のコードを追加して、パスワードハッシュを生成：

```java
// 一時的なコード（テスト用）
BCryptPasswordEncoder encoder = new BCryptPasswordEncoder();
String hashedPassword = encoder.encode("admin");
System.out.println("Hashed password: " + hashedPassword);
```

### 方法B: データベースで直接更新

以下のSQLを実行して、管理者パスワードを更新：

```sql
USE clinic_booking_db;

-- BCryptハッシュを直接更新（以下のハッシュは"admin"のパスワード）
UPDATE administrators 
SET password = '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iAt6Z5EHsM8lE9lBOsl7iwK8pJDm'
WHERE admin_login_id = 'admin';
```

## 解決方法: 新しい管理者レコードを追加

既存のレコードを削除して、新しいレコードを追加：

```sql
USE clinic_booking_db;

-- 既存の管理者を削除
DELETE FROM administrators WHERE admin_login_id = 'admin';

-- 新しい管理者を追加（パスワードハッシュは後で更新）
INSERT INTO administrators (admin_login_id, password, name) 
VALUES ('admin', '$2a$10$N.zmdr9k7uOCQb376NoUnuTJ8iAt6Z5EHsM8lE9lBOsl7iwK8pJDm', 'システム管理者');
```

**注意**: 上記のハッシュ値が正しく動作しない場合は、アプリケーション起動時にログで確認するか、新しいハッシュを生成してください。
