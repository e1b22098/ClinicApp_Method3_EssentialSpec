# Mavenクリーンビルドエラーの解決方法

## エラー: Failed to delete target directory

このエラーは、`target`ディレクトリ内のファイルが他のプロセス（IDEやJavaプロセス）によって使用されている場合に発生します。

## 解決方法

### 方法1: IDEを閉じて再試行（推奨）

1. **IDEを完全に閉じる**
   - Eclipse: 全てのウィンドウを閉じる（右上の×ボタン）
   - IntelliJ IDEA: ウィンドウを閉じ、タスクトレイのアイコンも「Exit」で終了
   - 詳細は「IDEの完全終了方法.md」を参照

2. **プロセスが残っていないか確認（オプション）**

```powershell
# Eclipseのプロセスを確認
Get-Process | Where-Object {$_.ProcessName -like "*eclipse*"}

# IntelliJ IDEAのプロセスを確認
Get-Process | Where-Object {$_.ProcessName -like "*idea*"}
```

何も表示されなければ、完全に終了しています。

3. **ターミナルで以下を実行：**

```powershell
mvn clean install -DskipTests
```

### 方法2: Javaプロセスを終了

実行中のJavaプロセスがある場合、それを終了します：

```powershell
# Javaプロセスを確認
Get-Process | Where-Object {$_.ProcessName -like "*java*"}

# 必要に応じて終了（プロセスIDを指定）
Stop-Process -Id <プロセスID> -Force
```

その後、再度実行：

```powershell
mvn clean install -DskipTests
```

### 方法3: 手動でtargetディレクトリを削除

```powershell
# targetディレクトリを削除
Remove-Item -Path target -Recurse -Force

# その後、ビルドを実行（cleanは不要）
mvn install -DskipTests
```

### 方法4: cleanをスキップして直接ビルド

クリーンが必要ない場合は、cleanをスキップできます：

```powershell
mvn install -DskipTests
```

### 方法5: 実行可能JARを作成

アプリケーションを実行したい場合は、直接JARを作成：

```powershell
mvn package -DskipTests
java -jar target/appointment-1.0.0.jar
```

## 予防策

開発中は、IDEとMavenコマンドが同時にtargetディレクトリにアクセスしないように注意してください。
