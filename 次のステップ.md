# 次のステップ：データベースセットアップとアプリケーション起動

ビルドが成功しました！次は以下の手順を進めましょう。

## ステップ1: MySQLデータベースのセットアップ

### 1-1. MySQLに接続

```powershell
mysql -u root -p
```

パスワードを入力します（設定していない場合は、パスワードなしでEnterキーを押してください）。

### 1-2. データベースとテーブルを作成

MySQLコマンドラインで：

```sql
SOURCE src/main/resources/schema.sql;
```

または、コマンドラインから直接実行：

```powershell
mysql -u root -p < src/main/resources/schema.sql
```

### 1-3. データベース接続情報の確認

`src/main/resources/application.yml`を開いて、MySQLの接続情報を確認・変更してください：

```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/clinic_booking_db?useSSL=false&serverTimezone=Asia/Tokyo&characterEncoding=UTF-8
    username: root  # あなたのMySQLユーザー名（多くの場合はroot）
    password: root  # あなたのMySQLパスワード
```

**MySQL接続情報がわからない場合**は、`MySQL接続確認手順.md`を参照してください。

## ステップ2: アプリケーションの起動

データベースのセットアップが完了したら、アプリケーションを起動します：

**推奨方法：JARファイルを直接実行**

```powershell
java -jar target/appointment-1.0.0.jar
```

この方法が最も確実です。

**別の方法：Mavenから実行**

```powershell
mvn spring-boot:run
```

もし`mvn spring-boot:run`でエラーが発生する場合は、JARファイルの直接実行を使用してください。

## ステップ3: ブラウザでアクセス

アプリケーションが起動したら、ブラウザで以下のURLにアクセス：

```
http://localhost:8080
```

## ステップ4: ログイン

### 管理者でログイン

- **管理者ID**: `admin`
- **パスワード**: `admin`

### 患者でログイン（新規登録が必要）

1. トップページから「新規登録」をクリック
2. 患者情報を入力して登録
3. 登録後、診察券番号とパスワードでログイン

## トラブルシューティング

### データベース接続エラーが発生する場合

1. MySQLが起動しているか確認
2. `application.yml`の接続情報が正しいか確認
3. データベース`clinic_booking_db`が作成されているか確認

```sql
SHOW DATABASES;
USE clinic_booking_db;
SHOW TABLES;
```

### ポート8080が使用中の場合

`application.yml`でポート番号を変更：

```yaml
server:
  port: 8081  # 他のポートに変更
```

## 確認事項

✅ ビルド成功  
⬜ MySQLデータベースのセットアップ  
⬜ アプリケーションの起動  
⬜ ブラウザでアクセス確認  

順番に進めていきましょう！
