# 管理者ページ500エラー解決方法

## エラーの原因

管理者ページの営業日設定（`/admin/business-days`）で500エラーが発生する場合、以下の原因が考えられます：

1. **データベースに営業日が登録されていない**
2. **日付フォーマットの問題**（修正済み）
3. **データベース接続エラー**

## 修正内容

以下の修正を行いました：

1. **エラーハンドリングの追加** - エラーが発生してもページが表示されるようにしました
2. **日付フォーマットの簡略化** - テンプレートの日付表示を修正しました

## 次のステップ

### ステップ1: アプリケーションを再ビルド・再起動

```powershell
mvn install -DskipTests
java -jar target/appointment-1.0.0.jar
```

### ステップ2: 再度アクセス

ブラウザで `/admin/business-days` にアクセスしてください。

### ステップ3: 営業日データが存在しない場合

営業日データが存在しない場合、以下のSQLで追加：

```sql
USE clinic_booking_db;

-- 来月の営業日を10日分追加
INSERT INTO business_days (business_date, is_available) 
VALUES 
(DATE_ADD(CURDATE(), INTERVAL 1 MONTH), TRUE),
(DATE_ADD(CURDATE(), INTERVAL 1 MONTH) + INTERVAL 1 DAY, TRUE),
(DATE_ADD(CURDATE(), INTERVAL 1 MONTH) + INTERVAL 2 DAY, TRUE),
(DATE_ADD(CURDATE(), INTERVAL 1 MONTH) + INTERVAL 3 DAY, TRUE),
(DATE_ADD(CURDATE(), INTERVAL 1 MONTH) + INTERVAL 4 DAY, TRUE),
(DATE_ADD(CURDATE(), INTERVAL 1 MONTH) + INTERVAL 5 DAY, TRUE),
(DATE_ADD(CURDATE(), INTERVAL 1 MONTH) + INTERVAL 6 DAY, TRUE),
(DATE_ADD(CURDATE(), INTERVAL 1 MONTH) + INTERVAL 7 DAY, TRUE),
(DATE_ADD(CURDATE(), INTERVAL 1 MONTH) + INTERVAL 8 DAY, TRUE),
(DATE_ADD(CURDATE(), INTERVAL 1 MONTH) + INTERVAL 9 DAY, TRUE)
ON DUPLICATE KEY UPDATE is_available = TRUE;
```

### ステップ4: エラーログの確認

まだエラーが発生する場合は、アプリケーションのコンソールに表示されるエラーメッセージを確認してください。

## 確認事項

✅ コードを修正済み  
⬜ アプリケーションを再ビルド・再起動  
⬜ 再度アクセス  
⬜ 営業日データが存在するか確認（必要に応じて追加）
